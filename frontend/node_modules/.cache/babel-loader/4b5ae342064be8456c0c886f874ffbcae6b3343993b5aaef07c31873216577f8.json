{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:5000/api';\n\n// Create axios instance with base URL\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add a request interceptor to add the auth token to every request\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nexport const reportService = {\n  // Get all reports (filtered by role on backend)\n  getAll: async (filters = {}) => {\n    const params = new URLSearchParams();\n    if (filters.status) params.append('status', filters.status);\n    if (filters.problem_type) params.append('problem_type', filters.problem_type);\n    if (filters.priority) params.append('priority', filters.priority);\n    const response = await api.get(`/reports?${params.toString()}`);\n    return response.data;\n  },\n  // Get a specific report by reference ID\n  getById: async referenceId => {\n    const response = await api.get(`/reports/${referenceId}`);\n    return response.data;\n  },\n  // Create a new report\n  create: async formData => {\n    const response = await api.post('/reports', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  },\n  // Update report status (Authority only)\n  updateStatus: async (referenceId, status, priority = null) => {\n    const data = {\n      status\n    };\n    if (priority) data.priority = priority;\n    const response = await api.put(`/reports/${referenceId}/status`, data);\n    return response.data;\n  },\n  // Get statistics (Authority only)\n  getStatistics: async () => {\n    const response = await api.get('/statistics');\n    return response.data;\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","error","Promise","reject","reportService","getAll","filters","params","URLSearchParams","status","append","problem_type","priority","response","get","toString","data","getById","referenceId","formData","post","updateStatus","put","getStatistics"],"sources":["C:/Users/yeshs/OneDrive/Desktop/caremypark - Copy/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\n// Create axios instance with base URL\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n// Add a request interceptor to add the auth token to every request\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const reportService = {\r\n  // Get all reports (filtered by role on backend)\r\n  getAll: async (filters = {}) => {\r\n    const params = new URLSearchParams();\r\n    if (filters.status) params.append('status', filters.status);\r\n    if (filters.problem_type) params.append('problem_type', filters.problem_type);\r\n    if (filters.priority) params.append('priority', filters.priority);\r\n    \r\n    const response = await api.get(`/reports?${params.toString()}`);\r\n    return response.data;\r\n  },\r\n\r\n  // Get a specific report by reference ID\r\n  getById: async (referenceId) => {\r\n    const response = await api.get(`/reports/${referenceId}`);\r\n    return response.data;\r\n  },\r\n\r\n  // Create a new report\r\n  create: async (formData) => {\r\n    const response = await api.post('/reports', formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    });\r\n    return response.data;\r\n  },\r\n\r\n  // Update report status (Authority only)\r\n  updateStatus: async (referenceId, status, priority = null) => {\r\n    const data = { status };\r\n    if (priority) data.priority = priority;\r\n    \r\n    const response = await api.put(`/reports/${referenceId}/status`, data);\r\n    return response.data;\r\n  },\r\n\r\n  // Get statistics (Authority only)\r\n  getStatistics: async () => {\r\n    const response = await api.get('/statistics');\r\n    return response.data;\r\n  }\r\n};\r\n\r\nexport default api;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,2BAA2B;;AAE3C;AACA,MAAMC,GAAG,GAAGF,KAAK,CAACG,MAAM,CAAC;EACvBC,OAAO,EAAEH,OAAO;EAChBI,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAK;EACV,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUK,KAAK,EAAE;EACrD;EACA,OAAOD,MAAM;AACf,CAAC,EACAI,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,OAAO,MAAMG,aAAa,GAAG;EAC3B;EACAC,MAAM,EAAE,MAAAA,CAAOC,OAAO,GAAG,CAAC,CAAC,KAAK;IAC9B,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAAC,CAAC;IACpC,IAAIF,OAAO,CAACG,MAAM,EAAEF,MAAM,CAACG,MAAM,CAAC,QAAQ,EAAEJ,OAAO,CAACG,MAAM,CAAC;IAC3D,IAAIH,OAAO,CAACK,YAAY,EAAEJ,MAAM,CAACG,MAAM,CAAC,cAAc,EAAEJ,OAAO,CAACK,YAAY,CAAC;IAC7E,IAAIL,OAAO,CAACM,QAAQ,EAAEL,MAAM,CAACG,MAAM,CAAC,UAAU,EAAEJ,OAAO,CAACM,QAAQ,CAAC;IAEjE,MAAMC,QAAQ,GAAG,MAAMvB,GAAG,CAACwB,GAAG,CAAC,YAAYP,MAAM,CAACQ,QAAQ,CAAC,CAAC,EAAE,CAAC;IAC/D,OAAOF,QAAQ,CAACG,IAAI;EACtB,CAAC;EAED;EACAC,OAAO,EAAE,MAAOC,WAAW,IAAK;IAC9B,MAAML,QAAQ,GAAG,MAAMvB,GAAG,CAACwB,GAAG,CAAC,YAAYI,WAAW,EAAE,CAAC;IACzD,OAAOL,QAAQ,CAACG,IAAI;EACtB,CAAC;EAED;EACAzB,MAAM,EAAE,MAAO4B,QAAQ,IAAK;IAC1B,MAAMN,QAAQ,GAAG,MAAMvB,GAAG,CAAC8B,IAAI,CAAC,UAAU,EAAED,QAAQ,EAAE;MACpD1B,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CAAC,CAAC;IACF,OAAOoB,QAAQ,CAACG,IAAI;EACtB,CAAC;EAED;EACAK,YAAY,EAAE,MAAAA,CAAOH,WAAW,EAAET,MAAM,EAAEG,QAAQ,GAAG,IAAI,KAAK;IAC5D,MAAMI,IAAI,GAAG;MAAEP;IAAO,CAAC;IACvB,IAAIG,QAAQ,EAAEI,IAAI,CAACJ,QAAQ,GAAGA,QAAQ;IAEtC,MAAMC,QAAQ,GAAG,MAAMvB,GAAG,CAACgC,GAAG,CAAC,YAAYJ,WAAW,SAAS,EAAEF,IAAI,CAAC;IACtE,OAAOH,QAAQ,CAACG,IAAI;EACtB,CAAC;EAED;EACAO,aAAa,EAAE,MAAAA,CAAA,KAAY;IACzB,MAAMV,QAAQ,GAAG,MAAMvB,GAAG,CAACwB,GAAG,CAAC,aAAa,CAAC;IAC7C,OAAOD,QAAQ,CAACG,IAAI;EACtB;AACF,CAAC;AAED,eAAe1B,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}